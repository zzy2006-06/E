# GPIO口简介 #  
![GPIO基本结构](GPIO基本结构.png)  
每个GPIO外设总共有十五个引脚编号是0到15。  
*寄存器*： 一种特殊的存储器，内核通过APB2总线对寄存器读写，完成输出电平和读取电平的功能。  
1.寄存器的每一位对应一个引脚输出寄存器写入1输出高电平写入0输入低电平。输入寄存器读取为1就为高电平读取为0就为低电平。  
*驱动器*： 增加信号驱动力  
![GPIO位结构](GPIO位结构.png)   
肖特基触发器改为施密特触发器（翻译错误）作用：对输入电压进行整形。  
**通用输入输出口**  
一.八种输入输出模式  
![GPIO模式](八种输入输出模式.png)  
1.浮空/上拉/下拉输入。  
![浮空/上拉/下拉配置](浮空上拉下拉.png)  
输入模式下输出驱动器断开,端口只能输入不能输出。  
2.模拟输入。  
![模拟输入](模拟输入.png)  
输出驱动器断开,端口只能输入不能输出。 
输入的施密特触发器断开也是无效状态。  
3.开漏输出和推挽输出。  
![开漏输出和推挽输出](开漏输出和推挽输出.png)  
输出模式下输入模式也是有效的。  
原因：一个端口只能有一个输出但可以有多个输入。  
4.复用开漏/推挽输出。  
![复用开漏推挽输出](复用开漏推挽输出.png)  
通用输出未连接，引脚由片上外设控制。  
# LED和蜂鸣器 #  
*LED*  
发光二极管，正向通电点亮反向通电不亮。 
长脚是正极短脚是负极   
低电平驱动点亮  
![低电平](低电平.png)  
高电平驱动点亮  
![高电平](高电平.png)   
*蜂鸣器*  
1.有源蜂鸣器：内部自带震荡源，将正负极接上直流电压即可发生频率固定。  
2.无源蜂鸣器：内部不带震荡源，需要控制器提供震荡脉冲才能发声，调整提供震荡脉冲的频率，可发出不同的声音。   
# 调试方式 #   
1.串口调试：通过串口通信，将调试信息发送到电脑电脑端，电脑使用串口助手显示调试信息。  
2.显示屏调试：直接将显示屏连接到单片机，将调试信息打印在显示屏上。  
3.Keli调试模式:借助Keil软件的调试模式,可使用单步运行，设置断点，查看寄存器及变量等功能。  
# 中断系统 #  
*中断*:在主程序运行过程中,出现了特定的中断触发条件(中断源),使得CPU暂停当前正在被运行的程序,转而去处理中断程序，处理完成后又返回原来被暂停的位置继续执行。  
*中断优先级*:当有多个中断源同时申请中断时,CPU会根据中断源的轻重缓急进行裁决,优先响应更加紧急的中断源。  
*中断嵌套*:当有一个中断程序正在运行时,又有新的更高优先级的中断源申请中断,CPU再次暂停当前中断程序,转而去处理新的中断程序，处理完成后再以此进行返回。  
NVIC基本结构
![NVIC基本结构](NVIC基本结构.png)  
负责中断优先级的分配任务  
NVIC优先级分组  
1.抢占优先级：终止当前运行的程序马上执行中断(中断嵌套)。  
2.响应优先级：运行完当前程序再执行中断(优先排队)。   
![NVIC优先级分组](NVIC优先级分组.png)  
ESTI介绍  
![ESTI](ESTI.png)  
ESTI基本结构  
![ESTI基本结构](ESTI基本结构.png)  
# 定时器 #
TIM简介  
![TIM简介](TIM简介.png)  
定时器类型   
![定时器类型](定时器类型.png)  
基本定时器结构  
![基本定时器](基本定时器.png)  
*时基单元* :  
1.预分频器:  
写0为一分频输出频率 = 72MHz/1  
写1为二分频输出频率 = 72MHz/2   
......   
实际分频系数 = 预分频器的值 + 1  
2.计数器 (只支持向上计数):  
对预分频后的计数时钟进行计数  
计数值不断自增  
3.自动重装寄存器:   
存入我们写入的计数目标  
计数值 = 自动重装值时即计时时间到，同时清零计数器  
*主模式触发DAC*(STM32定时器特色) :  
让内部硬件在不受程序控制下实现自动运行减轻CPU负担  
将定时器的更新事件映射到触发输出TRGO的位置，TRGO直接接DAC的触发转换引脚  
通用定时器结构  
![通用定时器](通用定时器.png)  
计数器:  
计数器计数模式  
1.向上计数:从零开始向上自增，自增到重装值申请中断清零重新自增。  
2.向下计数:从重装值开始自减，自减到零申请中断回到重装值重新自减。  
3.中央对其:从零开始自增到重装值申请中断再从重装值自减到零申请中断。  
定时中断基本结构  
![定时中断基本结构](定时中断基本结构.png)   
预分频器时序  
![预分频器时序](预分频器时序.png)  
计数器时序  
![计数器时序](计数器时序.png)  
计数器有预装时序  
![计数器有预装时序](计数器有预装时序.png)  
计数器无预装时序  
![计数器无预装时序](计数器无预装时序.png)   
对比:无预装时序时当突然更改自动重装寄存器后若此时计数器寄存器的值已经比更改后的值大计数器寄存器将会一直自增直到FFFF才会再回到零然后再自增到改后的值产生更新。  
有预装时序时更改自动重装寄存器后自动加载影子寄存器会结束完上一次的自增后在下一个周期更改值才有效。   
RCC时钟树  
![RCC时钟树](RCC时钟树.png)  
# TIM输出比较 #  
输出比较简介  
![输出比较](输出比较.png)  
OC:输出比较  
IC(Input Capture):输入捕获  
CC(Capture/Compare):输入捕获和输出比较  
PWM简介  
![](PWM简介.png)  
快速的调高低电平以实现LED的不同程度的亮度,电机调速的不同速度等  
使用PWM波形即可在数字系统等效输出模拟量   
 ![](输出比较通道.png)  
CNT计数器  
CCR捕获比较寄存器  
![](输出比较模式.png)  
高级定时器中的说法:
置有效电平,置无效电平  
理解为置有效电平就是置高电平,置无效电平就是置低电平  
PWM基本结构(**重点**)  
![](PWM基本结构.png)  
参数计算  
![](参数计算.png)  
舵机简介   
![](舵机简介.png)   
直流电机及驱动简介   
![](直流电机.png)  


